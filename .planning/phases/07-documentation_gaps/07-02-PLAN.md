---
phase: 07-documentation_gaps
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - EXAMPLES.md
autonomous: true

must_haves:
  truths:
    - "User can find backup workflow examples in EXAMPLES.md"
    - "User can find restore workflow examples in EXAMPLES.md"
    - "User can find disaster recovery scenario example"
    - "Examples demonstrate practical backup/restore usage"
  artifacts:
    - path: "EXAMPLES.md"
      provides: "Practical usage examples for all features"
      contains: "backup workflow, restore workflow, disaster recovery scenario"
  key_links:
    - from: "EXAMPLES.md"
      to: "README.md"
      via: "cross-reference links"
      pattern: "backup|restore"
---

<objective>
Add backup and restore workflow examples to EXAMPLES.md.

Purpose: Users need practical examples showing when and how to use backup and restore commands. EXAMPLES.md should demonstrate real-world scenarios including disaster recovery.

Output: Updated EXAMPLES.md with backup workflow, restore workflow, and disaster recovery scenario examples.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/PROJECT.md
@EXAMPLES.md
@core/backup_manager.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add backup workflow example to EXAMPLES.md</name>
  <files>EXAMPLES.md</files>
  <action>
    Add a new scenario section for backup workflows after the "Search Workflows" section and before "Progressive Disclosure Workflows".

    Create a new top-level section:

    ```markdown
    ## Backup and Restore Workflows

    ### Scenario: Creating Backups Before Major Operations

    **Use Case**: Protect your data before bulk operations or migrations.

    ### Problem

    You're about to perform a major operation (bulk ingest, schema migration, cleanup) and want to ensure you can recover if something goes wrong.

    ### Commands

    ```bash
    # Step 1: Create a backup before major operation
    ./skill_split.py backup --output pre-migration-20260210

    # Output:
    # Backup created: /Users/joey/.claude/backups/pre-migration-20260210.sql.gz
    # Database: ~/.claude/databases/skill-split.db
    # Records: 1,365 files, 19,207 sections

    # Step 2: Perform your operation (e.g., bulk ingest)
    ./skill_split.py ingest ~/.claude/skills/

    # Step 3: If something goes wrong, restore from backup
    ./skill_split.py restore pre-migration-20260210 --db ~/.claude/databases/skill-split.db --overwrite

    # Output:
    # Restoring from backup: /Users/joey/.claude/backups/pre-migration-20260210.sql.gz
    # Records restored: 20,572
    # Tables restored: 4
    # Integrity check: PASSED
    # Files: 1,365
    # Sections: 19,207
    ```

    ### Benefits

    - **Disaster Recovery**: Quick recovery from failed operations
    - **Point-in-Time Snapshots**: Capture database state before changes
    - **Gzip Compression**: Backup files are compressed (~10x smaller)
    - **Integrity Validation**: Automatic validation after restore
    ```

    Insert this section after "Search Workflows" (after line ~86, before "Progressive Disclosure Workflows").
  </action>
  <verify>grep -A 5 "## Backup and Restore Workflows" EXAMPLES.md</verify>
  <done>"## Backup and Restore Workflows" section exists with "Creating Backups Before Major Operations" scenario including problem, commands with output examples, and benefits</done>
</task>

<task type="auto">
  <name>Task 2: Add disaster recovery scenario to EXAMPLES.md</name>
  <files>EXAMPLES.md</files>
  <action>
    Add a disaster recovery scenario section after the backup workflow scenario added in Task 1.

    Create a new subsection:

    ```markdown
    ### Scenario: Disaster Recovery from Corrupted Database

    **Use Case**: Recover from database corruption or accidental data loss.

    ### Problem

    Your database has become corrupted or you accidentally deleted important data. You need to recover from a known good backup.

    ### Commands

    ```bash
    # Step 1: List available backups to find the right one
    ./skill_split.py backup --list

    # Output:
    # Available backups:
    # 2026-02-10 14:30  skill-split-20260210-143000.sql.gz  1.2 MB  (compressed)
    # 2026-02-09 09:15  skill-split-20260209-091500.sql.gz  1.1 MB  (compressed)
    # 2026-02-08 16:45  skill-split-20260208-164500.sql.gz  1.0 MB  (compressed)

    # Step 2: Restore from the most recent good backup
    ./skill_split.py restore skill-split-20260210-143000 --db ~/.claude/databases/skill-split.db --overwrite

    # Output:
    # Restoring from backup: /Users/joey/.claude/backups/skill-split-20260210-143000.sql.gz
    # Decompressing backup...
    # Restoring database...
    # Recreating FTS5 virtual table...
    #
    # Restore Summary:
    #   Records restored: 20,572
    #   Tables restored: 4
    #   Files: 1,365
    #   Sections: 19,207
    #   FTS5 index: Rebuilt
    #   Foreign keys: Enforced
    #   Integrity check: PASSED

    # Step 3: Verify the restored database
    ./skill_split.py status

    # Output:
    # Database: ~/.claude/databases/skill-split.db
    # Files: 1,365
    # Sections: 19,207
    # Last backup: 2026-02-10 14:30
    ```

    ### Benefits

    - **Complete Recovery**: Full database restoration with all data
    - **Automatic Cleanup**: Failed restores are cleaned up automatically
    - **FTS5 Rebuild**: Full-text search index rebuilt automatically
    - **Validation**: Integrity check ensures database is valid
    - **Overwrite Protection**: Requires --overwrite flag for safety
    ```

    Insert immediately after the "Creating Backups Before Major Operations" scenario added in Task 1.
  </action>
  <verify>grep -A 5 "### Scenario: Disaster Recovery" EXAMPLES.md</verify>
  <done>"### Scenario: Disaster Recovery from Corrupted Database" exists with step-by-step commands, realistic output examples, and benefits list</done>
</task>

<task type="auto">
  <name>Task 3: Add backup before bulk operations example</name>
  <files>EXAMPLES.md</files>
  <action>
    Add a practical example for backing up before bulk ingest operations. Create a new subsection:

    ```markdown
    ### Scenario: Bulk Ingest with Backup Protection

    **Use Case**: Safely ingest large numbers of new files with rollback protection.

    ### Problem

    You have hundreds of new skill files to ingest but want to be able to rollback if the ingest causes issues.

    ### Commands

    ```bash
    # Step 1: Create backup before ingest
    ./skill_split.py backup --output before-bulk-ingest

    # Step 2: Ingest new files
    ./skill_split.py ingest ~/new-skills/

    # Step 3: If issues occur, restore and retry
    # (Perhaps there was a parsing error in some files)
    ./skill_split.py restore before-bulk-ingest --db ~/.claude/databases/skill-split.db --overwrite

    # Step 4: Fix problematic files and retry ingest
    ./skill_split.py ingest ~/new-skills/ --skip-errors
    ```

    ### Benefits

    - **Safe Experimentation**: Try bulk operations without risk
    - **Quick Rollback**: Restore to previous state in seconds
    - **Iterative Refinement**: Fix issues and retry as needed
    - **No Data Loss**: Original data always recoverable
    ```

    Insert immediately after the disaster recovery scenario added in Task 2.
  </action>
  <verify>grep -A 5 "### Scenario: Bulk Ingest" EXAMPLES.md</verify>
  <done>"### Scenario: Bulk Ingest with Backup Protection" exists showing backup before ingest, rollback if issues, and iterative refinement workflow</done>
</task>

<task type="auto">
  <name>Task 4: Update Key Features Demonstrated section</name>
  <files>EXAMPLES.md</files>
  <action>
    Update the "Key Features Demonstrated" section at the end of EXAMPLES.md to include backup and restore capabilities.

    Find the section "## Key Features Demonstrated" (around line 801).

    Add two new items to the features list:
    - "9. **Automated Backups** - Timestamped, compressed database dumps"
    - "10. **Disaster Recovery** - Full restoration with integrity validation"

    Update the count from 8 to 10 features (or renumber accordingly).

    Also add a cross-reference in the "Next Steps" section to link backup/restore documentation to README.md.

    Add to Next Steps:
    "- See [README.md](./README.md#backup--restore) for complete backup/restore command reference"
  </action>
  <verify>grep -A 15 "## Key Features Demonstrated" EXAMPLES.md</verify>
  <done>"Key Features Demonstrated" section includes 9-10 features with backup and restore mentioned, "Next Steps" includes cross-reference to README backup/restore documentation</done>
</task>

</tasks>

<verification>
After completion, verify:
1. EXAMPLES.md has "## Backup and Restore Workflows" section
2. Three scenarios exist: Creating Backups, Disaster Recovery, Bulk Ingest
3. Each scenario has Problem, Commands with output examples, and Benefits
4. Key Features Demonstrated section includes backup/restore features
5. Next Steps includes cross-reference to README.md backup/restore documentation
</verification>

<success_criteria>
- EXAMPLES.md includes comprehensive backup/restore workflow examples
- Disaster recovery scenario demonstrates practical recovery steps
- Bulk ingest scenario shows safe experimentation workflow
- All examples include realistic command output
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation_gaps/07-02-SUMMARY.md`
</output>
